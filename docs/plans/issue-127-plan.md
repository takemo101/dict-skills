# Implementation Plan: Issue #127 - ページファイル名にタイトルを含める

## 概要

現在、出力されるページファイルは `page-001.md`, `page-002.md` のような連番のみの命名になっています。
このプランでは、ファイル名にページタイトルを含めることで、ファイル一覧からコンテンツを把握しやすくする機能を実装します。

例:
- Before: `page-001.md`, `page-002.md`
- After: `page-001-overview.md`, `page-002-getting-started.md`

## 影響範囲

### 変更ファイル
- `link-crawler/src/output/writer.ts` - メイン実装
- `link-crawler/tests/unit/writer.test.ts` - テスト追加・更新

## 実装ステップ

### Step 1: slugify関数の実装
`writer.ts` に以下の機能を持つヘルパー関数を追加:
- 小文字化
- スペースをハイフンに置換
- 特殊文字（英数字・ハイフン以外）を除去
- 50文字で切り詰め
- 連続するハイフンを1つにまとめる
- 先頭・末尾のハイフンを除去

### Step 2: savePageメソッドの修正
- タイトルを取得（metadata.title || title）
- タイトルが存在する場合はslugifyしてファイル名に追加
- タイトルがない場合は従来通り連番のみ
- ファイル名形式: `page-{number}-{slug}.md` or `page-{number}.md`

### Step 3: テストの更新
- 既存テストの更新（ファイル名形式の変更に対応）
- 新規テストケース:
  - タイトルありの場合のファイル名生成
  - タイトルなしの場合のファイル名生成
  - slugifyの各種パターン（大文字、スペース、特殊文字、長いタイトル）

## テスト方針

### 単体テスト
- `writer.test.ts` にて以下を検証:
  - 正常系: タイトルから適切なファイル名が生成される
  - 異常系: タイトルがない場合のフォールバック
  - エッジケース: 特殊文字、長いタイトル、空白のみなど

### 手動テスト
- 実際にクロールを実行し、出力ファイル名を確認

## リスクと対策

| リスク | 対策 |
|--------|------|
| ファイル名が長すぎる | 50文字で切り詰め |
| 特殊文字でファイルシステムエラー | 英数字・ハイフンのみに制限 |
| 既存処理との互換性 | 連番プレフィックスは維持 |
| タイトルが空/null | 従来通り連番のみのファイル名にフォールバック |

## 完了条件

- [x] slugify関数の実装
- [x] savePageメソッドの修正
- [x] テストの追加・更新
- [x] 全テストがパス
